{"remainingRequest":"C:\\Users\\Eliel\\OneDrive\\Área de Trabalho\\Dev\\vue2-dashboard\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Eliel\\OneDrive\\Área de Trabalho\\Dev\\vue2-dashboard\\src\\components\\ModalForm.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Eliel\\OneDrive\\Área de Trabalho\\Dev\\vue2-dashboard\\src\\components\\ModalForm.vue","mtime":1744479285718},{"path":"C:\\Users\\Eliel\\OneDrive\\Área de Trabalho\\Dev\\vue2-dashboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1744382677713},{"path":"C:\\Users\\Eliel\\OneDrive\\Área de Trabalho\\Dev\\vue2-dashboard\\node_modules\\vue-loader\\lib\\index.js","mtime":1744382682962}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIHByb3BzOiBbJ2l0ZW0nXSwNCiAgICBkYXRhOiAoKSA9PiAoeyBmb3JtOiB7fSB9KSwNCiAgICBjcmVhdGVkKCkgew0KICAgICAgICB0aGlzLmZvcm0gPSB0aGlzLml0ZW0NCiAgICAgICAgICAgID8geyAuLi50aGlzLml0ZW0gLA0KICAgICAgICAgICAgICAgIGFtb3VudDogTnVtYmVyKA0KICAgICAgICAgICAgICAgIFN0cmluZyh0aGlzLml0ZW0uYW1vdW50KS5yZXBsYWNlKCcsJywgJycpLnJlcGxhY2UoL1teXGQuLV0vZywgJycpDQogICAgICAgICAgICApLA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgOiB7DQogICAgICAgICAgICAgICAgcHJvZHVjdDogJycsDQogICAgICAgICAgICAgICAgY3VzdG9tZXI6ICcnLA0KICAgICAgICAgICAgICAgIGRhdGU6ICcnLA0KICAgICAgICAgICAgICAgIGFtb3VudDogbnVsbCwNCiAgICAgICAgICAgICAgICBwYXltZW50TW9kZTogJycsDQogICAgICAgICAgICAgICAgc3RhdHVzOiAnJywNCiAgICAgICAgICAgIH07DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIHNhdmUoKSB7DQogICAgICAgICAgICAvLyBzZSBmb3IgY3JpYcOnw6NvLCBhdHJpYnVpIHRyYWNraW5nSWQNCiAgICAgICAgICAgIGlmICghdGhpcy5mb3JtLmlkKSB7DQogICAgICAgICAgICAgICAgdGhpcy5mb3JtLnRyYWNraW5nSWQgPSBgIyR7TWF0aC5mbG9vcigxMDAwMCArIE1hdGgucmFuZG9tKCkgKiA5MDAwMCl9YDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8g4pSA4pSAIGZvcm1hdGEgYW1vdW50IEFOVEVTIGRlIGVudmlhciBhbyBKU09OIOKUgOKUgA0KICAgICAgICAgICAgaWYgKHRoaXMuZm9ybS5hbW91bnQgIT0gbnVsbCAmJiB0aGlzLmZvcm0uYW1vdW50ICE9PSAnJykgew0KICAgICAgICAgICAgICAgIC8vIHBlZ2EgbyBuw7ptZXJvIChhY2VpdGEgc3RyaW5nIGNvbSB2w61yZ3VsYSBvdSBwb250bykNCiAgICAgICAgICAgICAgICBjb25zdCByYXcgPSBTdHJpbmcodGhpcy5mb3JtLmFtb3VudCkucmVwbGFjZSgnLCcsICcuJyk7DQogICAgICAgICAgICAgICAgY29uc3QgbnVtID0gcGFyc2VGbG9hdChyYXcpOw0KICAgICAgICAgICAgICAgIGlmICghaXNOYU4obnVtKSkgew0KICAgICAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm1hIGVtICIxMiwzNDUuNjciDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybS5hbW91bnQgPSBudW0udG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyLA0KICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAyDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KDQogICAgICAgICAgICBjb25zdCByZXEgPSB0aGlzLmZvcm0uaWQNCiAgICAgICAgICAgICAgICA/IGF4aW9zLnB1dChgaHR0cDovL2xvY2FsaG9zdDozMDAwL3Byb2R1Y3RzLyR7dGhpcy5mb3JtLmlkfWAsIHRoaXMuZm9ybSkNCiAgICAgICAgICAgICAgICA6IGF4aW9zLnBvc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9wcm9kdWN0cycsIHRoaXMuZm9ybSk7DQoNCiAgICAgICAgICAgIHJlcS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzYXZlZCcpOw0KICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJyk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICB9LA0KfTsNCg=="},{"version":3,"sources":["ModalForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModalForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"overlay\">\r\n        <form @submit.prevent=\"save\">\r\n            <div>\r\n                <label>Status:<input v-model=\"form.status\" placeholder=\"Delivered\" /></label>\r\n            </div>\r\n            <div>\r\n                <label>Product:<input v-model=\"form.product\" placeholder=\"Hat\" /></label>\r\n            </div>\r\n            <div>\r\n                <label>Customer:<input v-model=\"form.customer\" placeholder=\"Matt Dickerson\" /></label>\r\n            </div>\r\n            <div>\r\n                <label>Date:<input v-model=\"form.date\" placeholder=\"13/05/2022\" /></label>\r\n            </div>\r\n            <div>\r\n                <label>Amount:\r\n                    <input type=\"number\" v-model.number=\"form.amount\" placeholder=\"$4.95\" step=\"0.01\" min=\"0\" /></label>\r\n            </div>\r\n            <div>\r\n                <label>Mode:<input v-model=\"form.paymentMode\" placeholder=\"Transfer Bank\" /></label>\r\n            </div>\r\n            <button type=\"button\" @click=\"$emit('close')\">Cancel</button>\r\n            <button type=\"submit\">Apply</button>\r\n        </form>\r\n    </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios';\r\nexport default {\r\n    props: ['item'],\r\n    data: () => ({ form: {} }),\r\n    created() {\r\n        this.form = this.item\r\n            ? { ...this.item ,\r\n                amount: Number(\r\n                String(this.item.amount).replace(',', '').replace(/[^\\d.-]/g, '')\r\n            ),\r\n            }\r\n            : {\r\n                product: '',\r\n                customer: '',\r\n                date: '',\r\n                amount: null,\r\n                paymentMode: '',\r\n                status: '',\r\n            };\r\n    },\r\n    methods: {\r\n        save() {\r\n            // se for criação, atribui trackingId\r\n            if (!this.form.id) {\r\n                this.form.trackingId = `#${Math.floor(10000 + Math.random() * 90000)}`;\r\n            }\r\n\r\n            // ── formata amount ANTES de enviar ao JSON ──\r\n            if (this.form.amount != null && this.form.amount !== '') {\r\n                // pega o número (aceita string com vírgula ou ponto)\r\n                const raw = String(this.form.amount).replace(',', '.');\r\n                const num = parseFloat(raw);\r\n                if (!isNaN(num)) {\r\n                    // transforma em \"12,345.67\"\r\n                    this.form.amount = num.toLocaleString('en-US', {\r\n                        minimumFractionDigits: 2,\r\n                        maximumFractionDigits: 2\r\n                    });\r\n                }\r\n            }\r\n\r\n\r\n            const req = this.form.id\r\n                ? axios.put(`http://localhost:3000/products/${this.form.id}`, this.form)\r\n                : axios.post('http://localhost:3000/products', this.form);\r\n\r\n            req.then(() => {\r\n                this.$emit('saved');\r\n                this.$emit('close');\r\n            });\r\n        },\r\n    },\r\n};\r\n</script>\r\n<style scoped>\r\n.overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(0, 0, 0, 0.3);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\nform {\r\n    background: #fff;\r\n    padding: 16px;\r\n    border-radius: 4px;\r\n    width: 300px;\r\n}\r\n\r\nform div {\r\n    margin-bottom: 8px;\r\n}\r\n\r\ninput {\r\n    width: 100%;\r\n    padding: 4px;\r\n}\r\n\r\nbutton {\r\n    margin-right: 8px;\r\n    padding: 6px 12px;\r\n}\r\n</style>\r\n"]}]}